!function(){"use strict";var e,t,i,n,o=function(){function e(){this.classNameActive="is-hidden",this.classNameAnim="is-animating"}return e.prototype.switchDOM=function(e){e.classList.toggle(this.classNameActive)},e.prototype.animDOM=function(e){e.classList.toggle(this.classNameAnim)},e}(),s=function(){function e(){this.ua=navigator.userAgent.toLowerCase(),console.log(this.ua)}return e.prototype.isIos=function(){return this.ua.indexOf("iphone")>=0||this.ua.indexOf("ipad")>=0||this.ua.indexOf("ipod")>=0},e.prototype.isIpad=function(){return this.ua.indexOf("ipad")>-1||this.ua.indexOf("macintosh")>-1&&"ontouchend"in document},e.prototype.isMobile=function(){return!!this.ua.match(/iphone|android.+mobile/)},e}(),u=function(){function e(){this.classNameActive="is-hidden"}return e.prototype.play=function(e){e.play()},e.prototype.reset=function(e){e.currentTime=0},e.prototype.releaseForIos=function(e){e.muted=!0,e.play(),e.pause(),e.muted=!1,e.currentTime=0},e}(),c=u,a=new o,l=new c,r=new s,d=function(){var e=this;this.isFocusing=!0,this.isTexting=!1,this.isYoucanflyTime=!1,this.timer=null,this.isIosFirstEnter=!0,this.isMobile=!1,this.isIos=!1,this.sodaWord=["sodaakari","sodakari","そだあかり"],this.youcanflyBlinkTime=3e3,this.reset=function(){e.textarea.value=""},this.input=function(){if(!e.isYoucanflyTime){for(var t=0;t<e.sodaWord.length;t++)if(e.textarea.value.toLowerCase().indexOf(e.sodaWord[t])>=0)return void e.youcanflyFunc(!0);if(""===e.textarea.value){if(e.isIos&&e.isIosFirstEnter)return void(e.isIosFirstEnter=!1);e.youcanflyFunc(!1),e.isIosFirstEnter=!0}}},this.keydown=function(t){console.log(t),e.isFocusing&&("Enter"===t.key?e.isTexting&&(e.isTexting=!1,setTimeout((function(){e.textarea.value+="パラ\n"}),50)):e.isTexting=!0)},this.youcanflyFunc=function(t){e.isYoucanflyTime=!0,e.textarea.blur(),clearTimeout(e.timer),a.switchDOM(e.youcanfly),a.animDOM(e.youcanfly),e.timer=setTimeout((function(){l.play(e.youcanflyVideoItem),a.switchDOM(e.youcanflyVideo)}),e.youcanflyBlinkTime),t&&(console.log("soda!"),e.youcanflyVideoItem.addEventListener("ended",e.profileOpenFunc,!1))},this.profileOpenFunc=function(){console.log("open func!"),a.switchDOM(e.profile),e.reset(),e.youcanflyVideoItem.removeEventListener("ended",e.profileOpenFunc,!1)},this.profileCloseFunc=function(){a.switchDOM(e.profile),e.isYoucanflyTime=!1,e.textarea.focus(),setTimeout((function(){e.profileInner.scrollTop=0}),300)},this.disableYoucanflyTime=function(){e.isYoucanflyTime=!1},this.textarea=document.getElementById("main-textarea"),this.textarea.addEventListener("focus",(function(){e.isFocusing=!0})),this.textarea.addEventListener("blur",(function(){e.isFocusing=!1})),this.textarea.addEventListener("input",this.input,!1),this.isMobile=r.isMobile(),this.isMobile&&(this.isFocusing=!1),this.isIos=r.isIos(),this.isMobile||r.isIpad()?this.textarea.addEventListener("compositionend",(function(){setTimeout((function(){e.textarea.value+="パラ\n"}),100)})):window.addEventListener("keydown",this.keydown,!1),this.youcanfly=document.getElementById("youcanfly"),this.youcanflyVideo=document.getElementById("youcanfly-video"),this.youcanflyVideoItem=document.getElementById("youcanfly-video-item"),this.profile=document.getElementById("profile"),this.profileInner=document.getElementById("profile-inner"),document.getElementById("profile-close").addEventListener("click",(function(){e.profileCloseFunc()}))},f=new o,y=new s,m=new c,h=!1,p=null,g=function(){console.log("videoreset"),console.log(n),m.releaseForIos(n),document.removeEventListener("click",g,!1)};window.addEventListener("load",(function(){p=new d,e=document.getElementById("main-textarea"),t=document.getElementById("youcanfly"),i=document.getElementById("youcanfly-video"),(n=document.getElementById("youcanfly-video-item")).addEventListener("ended",(function(){f.switchDOM(t),f.animDOM(t),f.switchDOM(i),e.focus(),m.reset(n),p.disableYoucanflyTime()})),h=y.isMobile(),y.isIos()&&document.addEventListener("click",g,!1),h&&e.setAttribute("cols","30")}))}();